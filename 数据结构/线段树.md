[TOC]

## 标记维护

[参考资料](https://www.luogu.com.cn/blog/George-Plover/qian-tan-xian-xing-lan-biao-ji-wei-hu-ji-qiao-yi-xian-duan-shu-wei-li)

提供了一个很好的思路，对于一些奇怪的区间信息，难以自然推导标记维护形式。  
这时可以设计恰当的向量表示线段树上结点信息，用线性变换代替标记描述操作影响。矩阵描述操作往往想起来比较清晰，但是用矩乘代替标记维护会有 $O(c^3)$ 的常数，$c$ 为矩阵维数。不过往往能从矩阵逆推出标记维护形式，来优化常数。

## 线段树合并

如果合并需保留原有节点，则在需要合并节点信息时 ($p, q$ 均非空) 新建节点。