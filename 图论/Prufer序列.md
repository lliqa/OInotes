# Prufer 序列

### 定义

一种可以将一个带标号 $n$ 结点无根树用 $[1, n]$ 中的 $n - 2$ 个整数表示的序列，也可以理解为完全图的生成树与数列之间的双射。

### 原理

每次选择一个编号最小的叶子结点并将其删除，并在序列中记录它连接的结点。重复 $n-2$ 次直至仅剩 $2$ 个结点。

### 性质

1. Prufer 序列中每个数的出现次数即为它在原树中度数 $-1$ 。
   > 证明：  
   > 分别考虑最后剩下的两个结点和其他结点。  
   > 前者在 Prufer 序列中的出现次数容易见得为 $\deg - 1$。后者由于当 $\deg = 1$ 时被删除了而不是留下，因此出现次数也是 $\deg - 1$。
2. 构造 Prufer 序列最后剩下的点中其中之一一定为 $n$ 。
   > 证明：  
   > 在任意时刻叶子结点数总 $\geq 2$ ，则不可能删去 $n$。

### 应用

#### Tree to Prufer

见原理。

#### Prufer to Tree

假设现有一个 Prufer 序列 $a_n$，考虑利用它还原原树。  
根据性质 $1$，可以获取原树中每个结点的 $\deg$。然后每次模拟 Tree to Prufer 的过程，每次找到 $\deg = 1$ 的结点中编号最小的 $x$，它将连向 Prufer 序列 的第一个结点。确定这条边后，两者 $\deg$ 同时减一，并将 Prufer 中第一结点指针后移。  

值得注意的是，从上面两个应用来看，Tree 与 Prufer 序列 之间存在唯一的对应关系。

### Cayley 公式

$n$ 个点的完全图有 $n^{n - 2}$ 棵生成树。

> 证明：  
> 略。