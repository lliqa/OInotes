[TOC]

### A. Factory Balls

可以用二元组 $(a, b)$ 来描述任意状态，$a$ 表示已合法的位置集合，$b$ 表示装备的装置集合。  
总状态数只有 $2^{10} \times 2^{10}$，BFS 求出所有状态的最小代价即可。

### D. Triple Sword Strike

如果三刀都在同一维，最优的方案肯定是前三大的行。  
否则，有一维只切了一刀。枚举是哪一维的哪一行，在消除影响后切另一维的前两大。  
用 set 维护，时间复杂度 $O(n + v \log v)$。

### F. Stones 1

性质观察。  

对于一段极长连续且颜色相同的段：

1. 最多只有一个有贡献。
2. 在删除序列中连续出现。

并且可以任意确定删除顺序，贪心保留最大值，得到了一个长为 $n$ 的颜色相邻不同的序列。  

序列两端一定无贡献，每次删除一个有贡献的位置后相邻的两个有一个一定无贡献。由此可以得到贡献数的上界 $\lceil \frac{n - 2}2 \rceil$。

然后发现上界是可以达到的。对于任意一个大小不超过上界的选定的贡献位置集合 $S$，考虑构造证明其合法性：

1. 如果 $|S| = 1$，一定合法。
2. 否则，找到 $S$ 中满足存在相邻位置 $y \not \in S$ 的元素 $x$（如有多个优先选取 $y$ 不是两端的），删除 $x$，合并相邻的位置，回到 $1.$。

### H. Beacon Towers

直接考虑最大值，其必在最后一段，并且因为最后一段有最大值，一定不会影响前面段的合法性。设 $f_i$ 表示 $[1, i]$ 的分段方案数，记 $mxp (i)$ 表示 $[1, i]$ 中最大值的位置。转移为：

$$
f (i) = \sum_{j = 1}^{mxp (i)} f (j - 1)
$$

前缀和优化即可做到 $O (n)$。

### M. Short Question

$\min(|p_i - p_j|, |q_i - q_j|) = |p_i - p_j| + |q_i - q_j| - \max(|p_i - p_j|, |q_i - q_j|)$。  
$\max(|p_i - p_j|, |q_i - q_j|)$ 即为切比雪夫距离，$(p_i, q_i) \to (\dfrac{p_i + q_i}{2}, \dfrac{p_i - q_i}{2})$ 转为曼哈顿距离计算。  
时间复杂度 $O(n)$。